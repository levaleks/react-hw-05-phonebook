(this["webpackJsonpreact-hw-05-phonebook"]=this["webpackJsonpreact-hw-05-phonebook"]||[]).push([[0],{20:function(e,n,t){e.exports=t(33)},25:function(e,n,t){},33:function(e,n,t){"use strict";t.r(n);var a=t(0),c=t.n(a),o=t(5),r=t.n(o),i=(t(25),t(26),t(37)),s=t(1),l=t(2);function u(){const e=Object(s.a)(["\n    display: flex;\n    flex-direction: column;\n    margin: 0;\n    padding: 10px;\n    box-shadow: 0 1px 2px 0 rgba(0, 0, 0, 0.75);\n    border-radius: 2px;\n    background: white;\n\n    > * {\n        margin-top: 10px;\n\n        &:first-child {\n            margin-top: 0;\n        }\n    }\n"]);return u=function(){return e},e}const m=e=>l.a[e](u()),b=m("div"),d=({tag:e="div",children:n,...t})=>c.a.createElement(b,Object.assign({as:e},t),n);function p(){const e=Object(s.a)(["\n    margin-top: 5px;\n    padding: 5px;\n\n    &:first-child {\n        margin-top: 0;\n    }\n"]);return p=function(){return e},e}function E(){const e=Object(s.a)([""]);return E=function(){return e},e}function g(){const e=Object(s.a)(["\n    display: flex;\n    flex-direction: column;\n"]);return g=function(){return e},e}const f=l.a.label(g()),h=l.a.span(E()),O=l.a.input(p()),C=({label:e,value:n,disabled:t,onChange:a,name:o,type:r,labelProps:i,inputProps:s})=>c.a.createElement(f,i,e&&c.a.createElement(h,null,e),c.a.createElement(O,Object.assign({value:n,onChange:a,disabled:t,name:o,type:r},s)));function j(){const e=Object(s.a)(["\n    padding: 5px;\n"]);return j=function(){return e},e}const T=l.a.button(j()),y=({children:e,...n})=>c.a.createElement(T,n,e);var x=t(36);const v={search:"",contacts:[]};let w;!function(e){e.SET_CONTACTS="SET_CONTACTS",e.CREATE_CONTACT="CREATE_CONTACT",e.DELETE_CONTACT="DELETE_CONTACT",e.SET_SEARCH="SET_SEARCH"}(w||(w={}));const k=(e,n)=>{switch(n.type){case w.SET_CONTACTS:return{...e,contacts:n.payload.contacts};case w.CREATE_CONTACT:return{...e,contacts:[...e.contacts,{id:Object(x.a)(),name:n.payload.name,number:n.payload.number}]};case w.DELETE_CONTACT:return{...e,contacts:[...e.contacts.filter(({id:e})=>e!==n.payload.id)]};case w.SET_SEARCH:return{...e,search:n.payload.search};default:return e}},S=c.a.createContext({...v,dispatch:()=>0});function A(){const e=Object(s.a)(["\n    position: fixed;\n    padding: 10px 20px;\n    top: 50px;\n    right: 10px;\n    background: firebrick;\n    text-align: left;\n    color: white;\n    font-weight: 100;\n\n    &.enter {\n        animation: 0.25s bounceInRight ease;\n    }\n\n    &.exit {\n        animation: 0.25s bounceOutRight ease;\n    }\n"]);return A=function(){return e},e}const N=l.a.div(A()),_=({children:e})=>Object(o.createPortal)(c.a.createElement(N,null,e),document.body),L=({isShowing:e,children:n})=>c.a.createElement(i.a,{in:e,timeout:200,mountOnEnter:!0,unmountOnExit:!0},c.a.createElement(_,null,n)),R=()=>{const{contacts:e,dispatch:n}=Object(a.useContext)(S),{isShowing:t,show:o}=(()=>{const[e,n]=Object(a.useState)(!1);return Object(a.useEffect)(()=>{let t=0;return e&&(t=setTimeout(()=>{n(!1)},3e3)),()=>{clearTimeout(t)}},[e]),{isShowing:e,show:()=>{n(!0)}}})(),[r,i]=Object(a.useState)(""),[s,l]=Object(a.useState)(""),u=Object(a.useCallback)(e=>i(e.target.value.trim()),[i]),m=Object(a.useCallback)(e=>l(e.target.value.trim()),[l]),b=Object(a.useCallback)(t=>{t.preventDefault();const a=t.target.name.value.trim().replace(/\s{2,}/g," "),c=t.target.number.value.trim();if(!a||!c)return;e.some(({name:e})=>a.toLowerCase()===e.toLowerCase())?o():(n({type:w.CREATE_CONTACT,payload:{name:a,number:c}}),i(""),l(""))},[e,o,n]);return c.a.createElement(c.a.Fragment,null,c.a.createElement(L,{isShowing:t},"Contact already exists!"),c.a.createElement(d,{tag:"form",autoComplete:"off",onSubmit:b},c.a.createElement(C,{label:"Name",name:"name",value:r,onChange:u}),c.a.createElement(C,{label:"Number",name:"number",value:s,onChange:m}),c.a.createElement(y,{disabled:!r||!s},"Add contact")))};var D=t(12);const I=()=>{const{contacts:e,dispatch:n}=Object(a.useContext)(S),[t,o]=Object(a.useState)(""),r=Object(a.useCallback)(Object(D.debounce)(e=>n({type:w.SET_SEARCH,payload:{search:e.target.value.trim()}}),200),[D.debounce]),i=Object(a.useCallback)(e=>{e.persist(),o(e.target.value.trim()),r(e)},[r]);return Object(a.useEffect)(()=>{!e.length&&t&&o("")},[e,t,o]),c.a.createElement(d,null,c.a.createElement(C,{label:"Find contacts by name",value:t,onChange:i,disabled:!e.length}))};var P=t(38),F=t(35);function H(){const e=Object(s.a)(["\n    margin-left: auto;\n"]);return H=function(){return e},e}function J(){const e=Object(s.a)(["\n    margin-left: auto;\n"]);return J=function(){return e},e}function B(){const e=Object(s.a)([""]);return B=function(){return e},e}function M(){const e=Object(s.a)(["\n    flex-direction: row;\n    align-items: center;\n\n    > * {\n        margin: 0;\n    }\n\n    &.enter {\n        animation: 0.25s backInLeft ease;\n    }\n\n    &.exit {\n        animation: 0.25s backOutLeft ease;\n    }\n"]);return M=function(){return e},e}const W=Object(l.a)(b)(M()),z=l.a.span(B()),$=l.a.span(J()),q=Object(l.a)(T)(H()),G=({id:e,name:n,number:t,onContactDelete:a})=>c.a.createElement(W,{as:"li"},c.a.createElement(z,null,n),c.a.createElement($,null,t),c.a.createElement(q,{"data-id":e,onClick:e=>{a(e.currentTarget.getAttribute("data-id"))}},"Delete"));function K(){const e=Object(s.a)(["\n    margin-top: 20px;\n\n    &.enter {\n        animation: 0.25s fadeIn ease;\n    }\n\n    &.exit {\n        animation: 0.25s fadeOut ease;\n    }\n"]);return K=function(){return e},e}function Q(){const e=Object(s.a)(["\n    margin: 0;\n    padding: 0;\n    box-shadow: none;\n    border-radius: 0;\n    background: 0;\n"]);return Q=function(){return e},e}const U=Object(l.a)(m("ul"))(Q()),V=l.a.div(K());function X(){const e=Object(s.a)(["\n    justify-content: center;\n"]);return X=function(){return e},e}const Y=Object(l.a)(W)(X()),Z=({message:e})=>c.a.createElement(Y,{as:"li"},e),ee=()=>{var e;const{search:n,contacts:t,dispatch:o}=Object(a.useContext)(S),r=Object(a.useCallback)(e=>o({type:w.DELETE_CONTACT,payload:{id:e}}),[o]),s=Object(a.useMemo)(()=>t.filter(({name:e})=>e.toLocaleLowerCase().includes(n.toLocaleLowerCase())),[n,t]),[l,u]=Object(a.useState)();return Object(a.useEffect)(()=>{s.length?u({key:"list",component:c.a.createElement(P.a,{component:U},s.map(({id:e,name:n,number:t})=>c.a.createElement(i.a,{key:e,timeout:200,mountOnEnter:!0,unmountOnExit:!0},c.a.createElement(G,{id:e,name:n,number:t,onContactDelete:r}))))}):u({key:"placeholder",component:c.a.createElement(U,null,c.a.createElement(Z,{message:"Nothing to show"}))})},[s,r]),c.a.createElement(F.a,null,c.a.createElement(i.a,{key:null!==(e=null===l||void 0===l?void 0:l.key)&&void 0!==e?e:"key",timeout:200},c.a.createElement(V,null,null===l||void 0===l?void 0:l.component)))};function ne(){const e=Object(s.a)(["\n    margin: 0 0 20px;\n\n    &.enter {\n        animation: 0.5s backInLeft ease;\n    }\n"]);return ne=function(){return e},e}function te(){const e=Object(s.a)(["\n    --color-big-stone: #122236;\n    --color-big-stone-pale: rgba(18, 34, 54, 0.1);\n    --color-regent-gray: #82909e;\n    --color-mystic: #e4e9f0;\n\n    margin: 60px auto 0;\n    width: 320px;\n\n    > "," {\n        margin-top: 20px;\n\n        &:first-child {\n            margin-top: 0;\n        }\n\n        &:empty {\n            margin-top: 0;\n        }\n    }\n"]);return te=function(){return e},e}const ae=l.a.main(te(),b),ce=l.a.h3(ne());class oe{constructor(e){this.key=e}getContacts(){const e=localStorage.getItem(this.key);try{const{contacts:n}=e?JSON.parse(e):{contacts:[]};return n}catch(n){throw console.error("Failed to parse contacts storage: ".concat(e,".")),n}}saveContacts(e){try{const n=JSON.stringify({contacts:e});localStorage.setItem(this.key,n)}catch(n){throw console.error("Failed to serialize contacts list."),n}}}const re=()=>{const[{search:e,contacts:n},t]=Object(a.useReducer)(k,v),o=Object(a.useRef)(new oe("phonebook-v1")),[r,s]=Object(a.useState)(!1);Object(a.useEffect)(()=>{t({type:w.SET_CONTACTS,payload:{contacts:o.current.getContacts()}}),s(!0)},[]),Object(a.useEffect)(()=>{o.current.saveContacts(n)},[n]);const l=Object(a.useMemo)(()=>({search:e,contacts:n,dispatch:t}),[e,n,t]);return c.a.createElement(S.Provider,{value:l},c.a.createElement(ae,null,c.a.createElement(i.a,{in:r,timeout:200},c.a.createElement(ce,null,"Phonebook")),c.a.createElement(R,null),c.a.createElement(I,null),c.a.createElement(ee,null)))},ie=()=>c.a.createElement(re,null);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(c.a.createElement(ie,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(e=>{e.unregister()}).catch(e=>{console.error(e.message)})}},[[20,1,2]]]);
//# sourceMappingURL=main.daba90b3.chunk.js.map